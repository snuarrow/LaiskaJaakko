<!DOCTYPE html>
<html>
    <head>
        <title>Plant Monitor</title>
        <link rel="stylesheet" href="styles.css">
        <script>
            const scriptUrls = [
                'https://cdn.jsdelivr.net/npm/chart.js',
                'https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns',
                'main.js',
                'pico-charts.js'
            ];
            const maxRetries = 3;
            function loadScriptWithRetry(url, retries) {
                return new Promise((resolve, reject) => {
                    const script = document.createElement('script');
                    script.src = url;
                    
                    script.onload = () => {
                        console.log(`Script loaded successfully: ${url}`);
                        resolve();
                    };
    
                    script.onerror = () => {
                        if (retries > 0) {
                            console.log(`Failed to load script. Retrying... (${retries} attempts left)`);
                            resolve(loadScriptWithRetry(url, retries - 1));
                        } else {
                            console.error(`Failed to load script after ${maxRetries} attempts.`);
                            reject(new Error(`Failed to load script: ${url}`));
                        }
                    };
                    document.head.appendChild(script);
                });
            }
            for (const scriptUrl of scriptUrls) {
                loadScriptWithRetry(scriptUrl, maxRetries)
                    .then(() => {
                        console.log('Script loaded successfully after retries if necessary.');
                    })
                    .catch(error => {
                        console.error('Script failed to load:', error);
                    });
            }
        </script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
        <script src=main.js></script>
        <script src=pico-charts.js></script>
    </head>
    <body style="background-color: rgb(240, 240, 240);">
        <h1 id="given-name"></h1>
        <p>Laiska-Jaakko Plant Monitor</p>
        <p id="uuid"></p>
        <h3>System</h3>
        <h3>Led Control</h3>
        <label class="switch">
            <input type="checkbox" id="toggle" checked onclick="toggleLed()">
            <span class="slider round"></span>
        </label>
        <div class="chart-container-wrapper" id="chart-wrapper">
        </div>
    </body>
</html>